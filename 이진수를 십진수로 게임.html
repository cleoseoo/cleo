<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>2ì§„ìˆ˜ â†’ 10ì§„ìˆ˜ ë³€í™˜ ê²Œì„</title>
  <style>
    body {
      font-family: sans-serif;
      text-align: center;
      padding: 40px;
    }
    .step {
      margin: 10px;
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 10px;
    }
    input.step-input {
      width: 80px;
      padding: 5px;
      font-size: 16px;
      text-align: center;
    }
    input.correct {
      background-color: #4CAF50;
      color: white;
    }
    input.incorrect {
      background-color: #E53935;
      color: white;
    }
    #finalResult {
      font-size: 20px;
      font-weight: bold;
      margin-top: 20px;
    }
    #binaryDisplay {
      font-size: 24px;
      margin-bottom: 20px;
    }
    button {
      padding: 10px 20px;
      font-size: 16px;
      margin: 15px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <h1>ğŸ’¡ 2ì§„ìˆ˜ â†’ 10ì§„ìˆ˜ ë³€í™˜ ê²Œì„</h1>
  <p>ì œì‹œëœ 2ì§„ìˆ˜ë¥¼ 10ì§„ìˆ˜ë¡œ ë³€í™˜í•˜ëŠ” ê³¼ì •ì„ ë‹¨ê³„ë³„ë¡œ ì±„ì›Œë³´ì„¸ìš”!</p>

  <div id="binaryDisplay"></div>
  <div id="stepsContainer"></div>
  
  <button onclick="checkAnswers()">ì œì¶œ</button>
  <button onclick="createGame()">ìƒˆ ê²Œì„</button>

  <div id="finalResult"></div>

  <script>
    let binaryStr = ""; // ì œì‹œí•  2ì§„ìˆ˜ ë¬¸ìì—´
    let steps = [];     // ê° ìë¦¿ìˆ˜ì˜ ì •ë³´: { exponent, bit, expected, inputElement }

    // ê²Œì„ ìƒì„±: ë¬´ì‘ìœ„ ê¸¸ì´(3~6ìë¦¬) 2ì§„ìˆ˜ ìƒì„± ë° ë‹¨ê³„ êµ¬ì„±
    function createGame() {
      steps = [];
      document.getElementById("finalResult").innerText = "";
      
      // 3~6ìë¦¬ ë¬´ì‘ìœ„ 2ì§„ìˆ˜ ìƒì„±
      const length = Math.floor(Math.random() * 4) + 3;
      binaryStr = "";
      for (let i = 0; i < length; i++) {
        binaryStr += Math.random() < 0.5 ? "0" : "1";
      }
      // ì²« ìë¦¬ê°€ 0ì´ë©´ ì•ˆë˜ê²Œ (ì–‘ì˜ ì •ìˆ˜) â€“ ë§Œì•½ 0ì´ë©´ 1ë¡œ ê°•ì œ
      if (binaryStr[0] === "0") {
        binaryStr = "1" + binaryStr.slice(1);
      }
      
      document.getElementById("binaryDisplay").innerText = `ì£¼ì–´ì§„ 2ì§„ìˆ˜: ${binaryStr}`;
      
      // ê° ìë¦¬ì˜ ì •ë³´ êµ¬ì„± (ì™¼ìª½ ìë¦¬ê°€ ìµœëŒ€ ì§€ìˆ˜)
      const container = document.getElementById("stepsContainer");
      container.innerHTML = "";
      const n = binaryStr.length;
      for (let i = 0; i < n; i++) {
        // ì™¼ìª½ì—ì„œ ië²ˆì§¸ ìë¦¿ìˆ˜ì˜ ì§€ìˆ˜ = (n - 1 - i)
        const exponent = n - 1 - i;
        const bit = binaryStr[i];
        // ê³„ì‚°: í•´ë‹¹ ìë¦¬ì˜ ê³±ì…ˆ ê²°ê³¼
        const expected = parseInt(bit) * Math.pow(2, exponent);
        
        // ê° ë‹¨ê³„ë³„ ì¤„ êµ¬ì„±
        const stepDiv = document.createElement("div");
        stepDiv.className = "step";
        
        const label = document.createElement("span");
        label.innerHTML = `2<sup>${exponent}</sup> Ã— ${bit} = `;
        
        const input = document.createElement("input");
        input.type = "number";
        input.className = "step-input";
        input.placeholder = "?";
        
        // ì €ì¥: ê° ë‹¨ê³„ì˜ ì •ë³´ë¥¼ ë‚˜ì¤‘ì— ê²€ì¦í•  ìˆ˜ ìˆë„ë¡ steps ë°°ì—´ì— ì¶”ê°€
        steps.push({ exponent, bit, expected, inputElement: input });
        
        stepDiv.appendChild(label);
        stepDiv.appendChild(input);
        container.appendChild(stepDiv);
      }
    }
    
    // ì œì¶œ ì‹œ ê° ë‹¨ê³„ ì •ë‹µ í™•ì¸ ë° ìµœì¢… í•©ì‚° ê³„ì‚°
    function checkAnswers() {
      let isAllCorrect = true;
      let total = 0;
      
      // ê° ë‹¨ê³„ë³„ ê²€ì¦
      steps.forEach(step => {
        const userAnswer = parseInt(step.inputElement.value);
        
        // ì´ˆê¸° ìƒíƒœë¡œ í´ë˜ìŠ¤ ì œê±°
        step.inputElement.classList.remove("correct", "incorrect");
        
        if (userAnswer === step.expected) {
          step.inputElement.classList.add("correct");
        } else {
          step.inputElement.classList.add("incorrect");
          isAllCorrect = false;
        }
        total += step.expected;
      });
      
      const resultDiv = document.getElementById("finalResult");
      if (isAllCorrect) {
        resultDiv.innerText = `âœ… ëª¨ë“  ë‹¨ê³„ ì •ë‹µ! ìµœì¢… 10ì§„ìˆ˜ ê°’ì€ ${total}ì…ë‹ˆë‹¤.`;
      } else {
        resultDiv.innerText = `âŒ ì¼ë¶€ ë‹¨ê³„ê°€ í‹€ë ¸ìŠµë‹ˆë‹¤. ìµœì¢… 10ì§„ìˆ˜ ê°’ì€ ${total} (ê° ë‹¨ê³„ì˜ ê²°ê³¼ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”).`;
      }
    }
    
    // ì´ˆê¸° ê²Œì„ ì‹œì‘
    createGame();
  </script>
</body>
</html>
