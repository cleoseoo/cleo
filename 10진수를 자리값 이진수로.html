<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>2ì§„ìˆ˜ ìë¦¬ê°’ ê²Œì„</title>
  <style>
    body { font-family: sans-serif; text-align: center; padding: 40px; }
    .bit-box { display: flex; justify-content: center; gap: 10px; flex-wrap: wrap; margin-top: 20px; }
    .bit {
      padding: 12px;
      border: 2px solid #333;
      width: 70px;
      cursor: pointer;
      font-weight: bold;
      white-space: pre-line;
      background-color: white;
      transition: background-color 0.3s;
    }
    .bit.active { background-color: #4CAF50; color: white; }
    .bit.incorrect { background-color: #E53935; color: white; }
    input { padding: 10px; font-size: 16px; width: 120px; margin: 10px; }
    button { padding: 10px 20px; font-size: 16px; margin: 10px; }
    #sumDisplay { margin-top: 20px; font-size: 18px; font-weight: bold; }
  </style>
</head>
<body>
  <h1>ğŸ§  ìë¦¬ê°’ìœ¼ë¡œ 2ì§„ìˆ˜ ë§Œë“¤ê¸° </h1>

  <p>2ì§„ìˆ˜ë¡œ ë³€í™˜í•˜ê³  ì‹¶ì€ 10ì§„ìˆ˜ë¥¼ ì…ë ¥í•˜ì„¸ìš”:</p>
  <input type="number" id="decimalInput" placeholder="ì˜ˆ: 25" min="1" max="1023" />
  <button onclick="createBits()">ìë¦¬ê°’ ìƒì„±</button>

  <div id="bitBox" class="bit-box"></div>
  <div id="sumDisplay"></div>
  <button onclick="checkAnswer()">ì œì¶œ</button>
  <div id="feedback"></div>

  <script>
    let decimal = 0;
    let bits = [];

    function createBits() {
      const input = document.getElementById("decimalInput").value;
      decimal = parseInt(input);
      if (isNaN(decimal) || decimal < 1) {
        alert("1 ì´ìƒì˜ ìˆ«ìë¥¼ ì…ë ¥í•˜ì„¸ìš”.");
        return;
      }

      bits = [];
      const bitBox = document.getElementById("bitBox");
      bitBox.innerHTML = "";

      const maxPower = Math.floor(Math.log2(decimal));
      for (let i = maxPower; i >= 0; i--) {
        const value = 2 ** i;
        const div = document.createElement("div");
        div.className = "bit";
        div.innerText = `2^${i}\n(0)`;
        div.onclick = () => toggleBit(div, i);
        bitBox.appendChild(div);
        bits.push({ element: div, active: false, value, power: i });
      }

      updateSum();
      document.getElementById("feedback").innerText = "";
    }

    function toggleBit(div, power) {
      const bit = bits.find(b => b.element === div);
      bit.active = !bit.active;
      div.classList.toggle("active", bit.active);
      div.classList.remove("incorrect"); // ì´ˆê¸°í™”
      div.innerText = `2^${power}\n(${bit.active ? 1 : 0})`;
      updateSum();
    }

    function updateSum() {
      const sum = bits.reduce((acc, b) => acc + (b.active ? b.value : 0), 0);
      document.getElementById("sumDisplay").innerText = `í˜„ì¬ ê°’ì˜ í•©: ${sum}`;
    }

    function checkAnswer() {
      const correctBinary = decimal.toString(2).padStart(bits.length, '0');

      bits.forEach((bit, idx) => {
        const expected = correctBinary[idx] === '1';
        const user = bit.active;

        if (user !== expected) {
          bit.element.classList.add("incorrect");
        } else {
          bit.element.classList.remove("incorrect");
        }
      });

      const total = bits.reduce((acc, b) => acc + (b.active ? b.value : 0), 0);
      const feedback = document.getElementById("feedback");
      if (total === decimal) {
        feedback.innerText = `âœ… ì •ë‹µì…ë‹ˆë‹¤!`;
      } else {
        feedback.innerText = `âŒ ì˜¤ë‹µì…ë‹ˆë‹¤. ëª©í‘œ: ${decimal}, í˜„ì¬: ${total}`;
      }
    }
  </script>
</body>
</html>
